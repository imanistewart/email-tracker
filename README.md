# Teddy Bear Email Tracker

![Python](https://img.shields.io/badge/python-3.10+-blue.svg)
![Flask](https://img.shields.io/badge/flask-2.x-green.svg)

A self-hosted, privacy-focused email tracking service inspired by Mailtrack. Instead of using invisible pixels, this service uses a fun, user-activated approach: recipients click a friendly teddy bear image to confirm they have received and opened the email.

The application features a web dashboard to view the status of all sent emails and their confirmation times.

## Features

*   **User-Activated Tracking**: Reliably tracks email opens through an explicit user click on a confirmation link (disguised as a teddy bear!).
*   **Web Dashboard**: A simple and clean interface at `/dashboard` to view all sent emails, their subjects, and a list of confirmation events (timestamps and IP addresses).
*   **RESTful API**: A `/register` endpoint to programmatically register emails before they are sent, returning a unique tracking ID.
*   **Unique Email Generation**: The sender script automatically adds a timestamp to each email's subject to prevent conversation threading in clients like Gmail.
*   **Engaging User Experience**: Features a fun email template and a celebratory confirmation page with a teddy bear and confetti effect.
*   **Persistent Storage**: Uses SQLite for simple, file-based data storage.

## Project Structure

```
email_tracker/
├── .env              # Local environment variables (credentials) - Not committed to Git
├── app.py            # The main Flask web server and API endpoints
├── database.py       # Handles all database interactions (SQLite)
├── sender.py         # A client script to send tracked emails
├── requirements.txt  # Python package dependencies
├── templates/
│   ├── dashboard.html    # The main tracking dashboard
│   └── confirmation.html # The "Thank You" page with the teddy bear
└── README.md         # This file
```

## Getting Started

Follow these instructions to get the project running on your local machine for development and testing.

### Prerequisites

*   Python 3.8+
*   `pip` and `venv`
*   Git

### Installation

1.  **Clone the repository:**
    ```bash
    git clone <your-repository-url>
    cd email-tracker
    ```

2.  **Create and activate a virtual environment:**
    *   On Windows:
        ```bash
        python -m venv .venv
        .\.venv\Scripts\Activate.ps1
        ```
    *   On macOS/Linux:
        ```bash
        python3 -m venv .venv
        source .venv/bin/activate
        ```

3.  **Install the required packages:**
    ```bash
    pip install -r requirements.txt
    ```

### Configuration

The application uses a `.env` file to manage sensitive credentials for the SMTP server.

1.  **Create a `.env` file** in the root of the project by copying the example:
    ```bash
    # On Windows
    copy .env.example .env

    # On macOS/Linux
    cp .env.example .env
    ```

2.  **Edit the `.env` file** with your own credentials. You will need an **App Password** for Gmail, not your regular account password.
    ```ini
    # .env
    SMTP_SERVER="smtp.gmail.com"
    SMTP_PORT="587"
    SMTP_USERNAME="your_email@gmail.com"
    SMTP_PASSWORD="your_password"
    TRACKING_SERVER_URL="http://127.0.0.1:8080"
    ```

### Running the Application

1.  **Initialize the database:**
    (You only need to run this once)
    ```bash
    python -c "from database import init_db; init_db()"
    ```

2.  **Start the Flask server:**
    Open a terminal and run:
    ```bash
    python app.py
    ```
    The server will be running at `http://127.0.0.1:8080`.

3.  **Send a test email:**
    Open a **second terminal**, activate the virtual environment, and run the sender script:
    ```bash
    python sender.py
    ```

4.  **View the Dashboard:**
    Open your web browser and navigate to `http://127.0.0.1:8080/dashboard` to see the status of your sent emails. When you click the teddy bear in the test email, the dashboard will update to show the confirmation.

## Deployment

This application is designed to be deployed to a Platform as a Service (PaaS) that supports persistent volumes for the SQLite database. **Fly.io** is an excellent choice due to its generous free tier that includes persistent storage.

The `Procfile` is included for compatibility with PaaS providers that use Gunicorn to serve the application.

---

*This README was generated by Gemini Code Assist.*